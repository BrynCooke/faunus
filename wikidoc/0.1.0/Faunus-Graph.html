<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-type" content="text/html;charset=utf-8">
  <link rel="stylesheet" type="text/css" href="../public/css/gollum.css" media="all">
  <link rel="stylesheet" type="text/css" href="../public/css/editor.css" media="all">
  <link rel="stylesheet" type="text/css" href="../public/css/dialog.css" media="all">
  <link rel="stylesheet" type="text/css" href="../public/css/template.css" media="all">
  
  <!--[if IE 7]>
  <link rel="stylesheet" type="text/css" href="../public/css/ie7.css" media="all">
  <![endif]-->
  
  <script type="text/javascript" src="../public/css/jquery.js"></script>
  <script type="text/javascript" src="../public/css/gollum.js"></script>
  <script type="text/javascript" src="../public/css/gollum.dialog.js"></script>
  <script type="text/javascript" src="../public/css/gollum.placeholder.js"></script>
  
  <script type="text/javascript" 
    src="../public/css/editor/gollum.editor.js"></script>
  <title>Faunus Graph</title>
</head>
<body>

<div id="wiki-wrapper" class="page">
<div id="head"><h3><a href="Home.html">Aurelius Faunus 0.1.0</a></h3>
  <h1>Faunus Graph</h1>
  <ul class="actions">
    <li class="minibutton"><a href="/pages"
      class="action-all-pages">All Pages</a></li>
    <li class="minibutton" class="jaws">
      <a href="#" id="minibutton-new-page">New Page</a></li>
    <li class="minibutton"><a href="/edit/Faunus-Graph"
       class="action-edit-page">Edit Page</a></li>
    <li class="minibutton"><a href="/history/Faunus-Graph"
       class="action-page-history">Page History</a></li>
  </ul>
  <div id="searchbar">
    <form action="/search" method="get" id="search-form">
    <div id="searchbar-fauxtext">
      <input type="text" name="q" id="search-query" value="Search&hellip;" autocomplete="off">
      <a href="#" id="search-submit" title="Search this wiki">
        <span>Search</span>
      </a>
    </div>
    </form>
  </div></div>
<div id="wiki-content">
  <div class="wrap">
  <div id="wiki-body" class="gollum-textile-content">
    <div id="template">
      <p><span class="float-left"><span><img src="images/graph-globe.png" width="125px" /></span></span> The source of any Faunus job is a <code>FaunusGraph</code>. <code>FaunusGraph</code> is simply a wrapper to a collection of Hadoop- and Faunus-specific configurations. Most importantly, it captures the location and type of the input graph and output graph. A <code>FaunusGraph</code> is typically created using one of the <code>FaunusFactory.open()</code> methods.</p>
<p><br /><br /></p>
<h2>FaunusGraph Construction</h2>
<p>A Faunus properties file is used to construct a <code>FaunusGraph</code>. Assume a file named <code>bin/faunus.properties</code> as represented below.</p>
<pre><code># input graph parameters
faunus.graph.input.format=com.thinkaurelius.faunus.formats.graphson.GraphSONInputFormat
faunus.input.location=graph-of-the-gods.json
# output data parameters
faunus.graph.output.format=com.thinkaurelius.faunus.formats.graphson.GraphSONOutputFormat
faunus.sideeffect.output.format=org.apache.hadoop.mapreduce.lib.output.TextOutputFormat
faunus.output.location=output
faunus.output.location.overwrite=true</code></pre>
<p>With <code>FaunusFactory</code>, a properties file is turned in a <code>FaunusGraph</code>. The <code>toString()</code> of the <code>FaunusGraph</code> denotes the input and output format of the graph. For instance, as seen below, a graph of type GraphSON is the input and a graph of type GraphSON is the output.</p>
<pre><code>gremlin&gt; g = FaunusFactory.open('bin/faunus.properties')
==&gt;faunusgraph[graphsoninputformat-&gt;graphsonoutputformat]</code></pre>
<h3>Hadoop-Specific Configurations</h3>
<p>As stated previously, a <code>FaunusGraph</code> is loaded with Hadoop specific configuration information that is percolated from the master cluster configuration (e.g. set up during cluster construction) to various job level configurations.</p>
<pre><code>gremlin&gt; g.getConfiguration()    
==&gt;keep.failed.task.files=false
==&gt;io.seqfile.compress.blocksize=1000000
==&gt;dfs.df.interval=60000
==&gt;dfs.datanode.failed.volumes.tolerated=0
==&gt;mapreduce.reduce.input.limit=-1
==&gt;mapred.task.tracker.http.address=0.0.0.0:50060
==&gt;mapred.userlog.retain.hours=24
==&gt;dfs.max.objects=0
==&gt;dfs.https.client.keystore.resource=ssl-client.xml
==&gt;mapred.local.dir.minspacestart=0
...</code></pre>
<h3>Faunus Properties</h3>
<p>Within this configuration, there are Faunus-specific configurations called <em>properties</em>. These properties can be isolated with <code>FaunusGraph.getProperties()</code>.</p>
<pre><code>gremlin&gt; g.getProperties()        
==&gt;faunus.graph.input.format=com.thinkaurelius.faunus.formats.graphson.GraphSONInputFormat
==&gt;faunus.input.location=graph-of-the-gods.json
==&gt;faunus.graph.output.format=com.thinkaurelius.faunus.formats.graphson.GraphSONOutputFormat
==&gt;faunus.sideeffect.output.format=org.apache.hadoop.mapreduce.lib.output.TextOutputFormat
==&gt;faunus.output.location=output
==&gt;faunus.output.location.overwrite=true</code></pre>
<p>Moreover, <code>FaunusGraph</code> provides getters/setters for mutating the most commonly used properties.</p>
<pre><code>gremlin&gt; g.setGraphOutputFormat(NoOpOutputFormat.class)
==&gt;null
gremlin&gt; g
==&gt;faunusgraph[graphsoninputformat-&gt;noopoutputformat]
gremlin&gt; g.getGraphOutputFormat()
==&gt;class com.thinkaurelius.faunus.formats.noop.NoOpOutputFormat
gremlin&gt; g.getProperties()       
==&gt;faunus.graph.input.format=com.thinkaurelius.faunus.formats.graphson.GraphSONInputFormat
==&gt;faunus.input.location=graph-of-the-gods.json
==&gt;faunus.graph.output.format=com.thinkaurelius.faunus.formats.noop.NoOpOutputFormat
==&gt;faunus.sideeffect.output.format=org.apache.hadoop.mapreduce.lib.output.TextOutputFormat
==&gt;faunus.output.location=output
==&gt;faunus.output.location.overwrite=true</code></pre>
<h3>Chaining Graphs</h3>
<p>To conclude, a useful <code>FaunusGraph</code> method is <code>getNextGraph()</code>. This method generates a new <code>FaunusGraph</code> that is the &#x201C;inverse&#x201D; of the current with the input formats and output locations reconfigured to support easy graph chaining.</p>
<pre><code>gremlin&gt; g = FaunusFactory.open('bin/faunus.properties')
==&gt;faunusgraph[graphsoninputformat-&gt;graphsonoutputformat]
gremlin&gt; h = g.getNextGraph()
==&gt;faunusgraph[graphsoninputformat-&gt;graphsonoutputformat]
gremlin&gt; h.getProperties()
==&gt;faunus.graph.input.format=com.thinkaurelius.faunus.formats.graphson.GraphSONInputFormat
==&gt;faunus.input.location=output/job-1
==&gt;faunus.graph.output.format=com.thinkaurelius.faunus.formats.graphson.GraphSONOutputFormat
==&gt;faunus.sideeffect.output.format=org.apache.hadoop.mapreduce.lib.output.TextOutputFormat
==&gt;faunus.output.location=output_
==&gt;faunus.output.location.overwrite=true</code></pre>
    </div>
  </div>
  </div>

</div>
<div id="footer">
  <p id="last-edit">Last edited by <b>spmallette</b>, 2013-01-15 02:58:11</p>
</div>
</div>

<script type="text/javascript" src="../public/css/MathJax/MathJax.js"></script>


</body>
</html>
